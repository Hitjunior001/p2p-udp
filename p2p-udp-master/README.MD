Projeto P2P Escal√°vel  
**Disciplina:** Sistemas Distribu√≠dos  
**Professor:** Prof. Me. Michel Junio  

## üë• Integrantes
- Rafael  
- Reginaldo  
- Bruna  
- Luiza  

---

## üéØ Objetivo

Desenvolver um sistema peer-to-peer (P2P) com as seguintes caracter√≠sticas:

1. **Service Discovery:** Peers localizam automaticamente o Master via broadcast UDP.  
2. **Distribui√ß√£o de Tarefas:** Master envia tarefas compactadas (ZIP) com scripts Python e arquivos CSV para execu√ß√£o pelos peers.  
3. **Execu√ß√£o Distribu√≠da:** Peers executam os scripts localmente e retornam os resultados.  
4. **Interoperabilidade:** Comunica√ß√£o padronizada entre peers e masters de diferentes grupos via JSON.

---

## üõ†Ô∏è Tecnologias Utilizadas

- **Python** ‚Äì Linguagem principal  
- **Socket** ‚Äì Comunica√ß√£o em rede (UDP/TCP)  
- **Threading** ‚Äì Execu√ß√£o concorrente  
- **JSON** ‚Äì Protocolo de mensagens  
- **Base64** ‚Äì Codifica√ß√£o de arquivos ZIP para envio  
- **Zipfile** ‚Äì Manipula√ß√£o de arquivos ZIP  

---

## üìÅ Estrutura de Diret√≥rios

**No Master:**
/tasks # ZIPs de tarefas a serem distribu√≠das
/results # ZIPs de resultados processados

**No Peer:**
/work # Diret√≥rio tempor√°rio para extra√ß√£o e execu√ß√£o

---

## üß™ Requisitos

- Python 3.7 ou superior  
- Criar previamente os diret√≥rios: `tasks`, `results`, `work`  

---

## ‚öôÔ∏è Instru√ß√µes de Uso

### üß≠ `master_udp_server.py`

Peer TCP (Master) que responde a solicita√ß√µes de descoberta e mant√©m conex√µes TCP com os peers.

#### Mensagens UDP recebidas:
- **DISCOVER_MASTER**
```json
// Resposta:
{
  "action": "MASTER_ANNOUNCE",
  "master_ip": "<ip-do-master>",
  "master_port": <porta-tcp-master>
}
Mensagens TCP:
REGISTER


// Enviado pelo peer:
{
  "action": "REGISTER",
  "peer_id": "<uuid-peer>",
  "addr": ["<ip-peer>", <porta-escuta-peer>]
}
// Resposta do master:
{ "status": "REGISTERED" }
HEARTBEAT

// Enviado periodicamente pelo peer:
{
  "action": "HEARTBEAT",
  "peer_id": "<uuid-peer>"
}
// Resposta:
{ "status": "ALIVE" }
üåê peer_udp_client.py
Peer que participa da rede e realiza o processo de descoberta, registro e execu√ß√£o de tarefas.

A√ß√µes dispon√≠veis:
DISCOVER_MASTER ‚Äì Envia broadcast UDP:

{
  "action": "DISCOVER_MASTER",
  "peer_id": "<uuid-peer>",
  "port_tcp": <porta_tcp_peer>
}
REGISTER ‚Äì Estabelece conex√£o TCP com o Master:

{
  "action": "REGISTER",
  "peer_id": "<uuid-peer>",
  "addr": ["<ip-peer>", <porta_tcp_peer>]
}
HEARTBEAT ‚Äì Mant√©m a conex√£o viva com o Master:

{
  "action": "HEARTBEAT",
  "peer_id": "<uuid-peer>"
}
üì¶ Execu√ß√£o e Processamento de Tarefas
Ciclo completo:
REQUEST_TASK ‚Äì Peer solicita uma tarefa:

{
  "action": "REQUEST_TASK",
  "peer_id": "<uuid-peer>"
}
TASK_PACKAGE ‚Äì Master envia a tarefa:

{
  "action": "TASK_PACKAGE",
  "task_name": "exemplo.zip",
  "task_data": "<base64-do-arquivo>"
}
Execu√ß√£o local no peer:
O ZIP √© extra√≠do em work/<task_name>/, onde main.py √© executado sobre input.csv. Os arquivos stdout.txt e stderr.txt s√£o gerados.

SUBMIT_RESULT ‚Äì Peer envia os resultados ao Master:

{
  "action": "SUBMIT_RESULT",
  "peer_id": "<uuid-peer>",
  "result_name": "exemplo.zip",
  "result_data": "<base64-do-resultado>"
}
Confirma√ß√£o do Master:

{ "status": "OK" }
